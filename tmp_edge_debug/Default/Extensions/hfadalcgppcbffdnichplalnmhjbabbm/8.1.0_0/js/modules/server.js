var Server=function(){var e=null;return{uploadStreamToServer:o=>{var r,t;Helper.log("Server fn called with stream",o),r="Upload",t=o,e?(Helper.log(r,t),e.send(t.data)):console.log("unable to emit")},performHttpRequest:(e="GET",o=null,r=null,t=null,n=!0)=>new Promise((t,l)=>{try{var a=new XMLHttpRequest;if(a.open(e,o,!0),a.setRequestHeader("Content-type","application/json"),n){let e=localStorage.getItem("live_user_token");e||l("Auth Token Not Set"),a.setRequestHeader("Authorization","Bearer "+e)}a.onreadystatechange=function(){4==a.readyState&&200==a.status&&t(Helper.parseJSON(a.responseText))},a.onerror=function(e){l("XHR Request Error : "+e.message)},"POST"==e?a.send(JSON.stringify(r)):a.send()}catch(e){Helper.error("Error While Performing HTTP request"),l(e)}}),getSocketConnection:()=>new Promise((o,r)=>{(e=new WebSocket("wss://record.fluvid.com/recording")).onerror=function(){Helper.log("WebSocket error"),e=null,r()},e.onopen=function(){Helper.log("WebSocket connection established"),o(e)},e.onclose=function(){Helper.log("WebSocket connection closed"),e=null,r()}})}}();