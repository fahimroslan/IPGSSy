const cookies_msg=document.getElementById("cookies_msg");if(navigator.cookieEnabled){cookies_msg&&(cookies_msg.style.display="none");var Event=function(){const e={screen:!0,camera:!0,audio:!0,fullDesktop:!0},t={available:{audio:!1,video:!1},permission:{audio:!1,video:!1}};var n=null,o=0;let c={CLICK:"click",CHANGE:"change"};var l="",i=1;var d,a=50,s=3,r=0,u=null;let m=(...e)=>{JSON.parse("false")&&console.log("Events File Log : ",...e)};var y;Helper.getAdvanceSetting("advanceSettingStatus").then(e=>{y=e&&e.advanceSettingStatus?e.advanceSettingStatus:{recordingTimer:!0,countdownView:!0,countdownNum:3,drawingMouseTools:!0,controlMenu:!0,systemSound:!0}});let p=(e,t)=>{i=t,Helper.sendMsgToContentScript("click_onLive_tab",{streamName:e});let n=setInterval(()=>{let t=document.getElementById("stream-list-option");t&&t.innerHTML.indexOf(e)>-1&&(t.value=e,clearInterval(n))},500)},g=(e,t,n)=>{e&&t&&c.hasOwnProperty(t.toUpperCase())?e.addEventListener(c[t.toUpperCase()],n):Helper.error("Error While Binding Event Emitter",t)},v=e=>{let t,n=document.getElementById("fde_banner_msg");t=1==e?u+' minutes limit per stream. <a href="https://fluvid.com/plans" target="_blank" style="text-decoration: underline;color: blue;">Upgrade</a> now to run and manage streams without any limitations.':u+'  minutes limit per video. <a href="https://fluvid.com/plans" target="_blank" style="text-decoration: underline;color: blue;">Upgrade</a> now to create recordings without any limitations. ',n.innerHTML=t},b=()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){audioContext=new AudioContext,analyser=audioContext.createAnalyser(),microphone=audioContext.createMediaStreamSource(e),javascriptNode=audioContext.createScriptProcessor(2048,1,1),analyser.smoothingTimeConstant=.8,analyser.fftSize=1024,microphone.connect(analyser),analyser.connect(javascriptNode),javascriptNode.connect(audioContext.destination),javascriptNode.onaudioprocess=function(){var e=new Uint8Array(analyser.frequencyBinCount);analyser.getByteFrequencyData(e);for(var t=0,n=e.length,o=0;o<n;o++)t+=e[o];!function(e){let t=document.getElementById("progress-Top-vol"),n=e;t&&(t.style.height=n+"%",t.style.backgroundColor="#32CD32");let o=document.getElementById("showLoadAudio");o&&(o.style.display="block")}(t/n)}})).catch((function(e){console.log(e,"<==Getting error into audio stream")}))};let _=()=>{let e=document.querySelector("#vcc-goto-signup");if(m("SignUp btn Clicked",e),e){let t=document.querySelector("#vcc-login-email-btn"),n=document.querySelector("#vcc-main-msg"),o=document.getElementById("vcc-login-sign-msg");"Sign Up"==e.textContent?(e.textContent="Sign In",o.textContent="Already have an account?",t.innerHTML='<img src="images/email.png"> Sign up with email',t.setAttribute("href","https://fluvid.com/registration"),n.textContent="Sign up for a Fluvid account"):(e.textContent="Sign Up",o.textContent="Don't have an account?",t.innerHTML='<img src="images/email.png"> Sign in with email',t.setAttribute("href","https://fluvid.com/login"),n.textContent="Sign in to your account")}},E=()=>{document.getElementById("advance-trigger").addEventListener("click",(function(){Helper.sendMsgToContentScript("cs_iframe_height",null,()=>{});var e=document.getElementById("advance-target");"none"===e.style.display?(e.style.display="block",document.getElementById("advance-trigger").innerText="Hide more options",Helper.sendMsgToBgScript("bg_click_advance_setting_open",{},()=>{})):(document.getElementById("advance-trigger").innerText="Show more options",e.style.display="none",Helper.sendMsgToBgScript("bg_click_advance_setting_close",{},()=>{}))})),document.getElementById("recordingTimer").addEventListener("click",(function(e){y.recordingTimer=e.target.checked,Helper.setAdvanceSetting(y),Helper.sendMsgToBgScript("bg_click_recording_timer",{},()=>{})})),document.getElementById("countdown1").addEventListener("click",(function(e){y.countdownView=e.target.checked,document.getElementById("countdown2").disabled=!JSON.parse(e.target.checked),Helper.setAdvanceSetting(y),Helper.sendMsgToBgScript("bg_click_countdown",{},()=>{})})),document.getElementById("countdown2").addEventListener("change",(function(){let e=document.getElementById("countdown2").value;y.countdownNum=e,Helper.setAdvanceSetting(y),Helper.sendMsgToBgScript("bg_click_countdown_change",{},()=>{})})),document.getElementById("drawingMouseTools").addEventListener("click",(function(e){y.drawingMouseTools=e.target.checked,Helper.setAdvanceSetting(y),Helper.sendMsgToBgScript("bg_click_drawing_mouse_tools",{},()=>{})}));let e=document.getElementById("systemSoundId");e.addEventListener("click",(function(t){y.systemSound=t.target.checked,Helper.setAdvanceSetting(y),Helper.sendMsgToBgScript("bg_set_system_sound",{systemSound:e.checked},()=>{}),Helper.setEventActionFun("system_sound_enabled",Number(e.checked).toString())})),document.getElementById("resetToDefault").addEventListener("click",()=>{y.recordingTimer=!0,y.countdownView=!0,y.countdownNum=3,y.drawingMouseTools=!0,y.systemSound=!0,Helper.setAdvanceSetting(y),document.getElementById("recordingTimer").checked=!0,document.getElementById("countdown1").checked=!0,document.getElementById("countdown2").disabled=!1,document.getElementById("countdown2").value=3,document.getElementById("drawingMouseTools").checked=!0,document.getElementById("systemSoundId").checked=!0,Helper.sendMsgToBgScript("bg_click_reset_default",{},()=>{})});const t=document.querySelectorAll(".openPlanPage");for(const e of t)e.addEventListener("click",(function(){window.open("https://fluvid.com/plans")}))},S=()=>{document.getElementById("keyBoardId").addEventListener("click",()=>{document.getElementById("showActionMenuBtnId").style.display="none",document.getElementById("showKeyboardListId").style.display="block",Helper.sendMsgToBgScript("bg_click_Keyboard_open",{},()=>{})}),document.getElementById("closeKeyboardList").addEventListener("click",()=>{document.getElementById("showActionMenuBtnId").style.display="block",document.getElementById("showKeyboardListId").style.display="none",Helper.sendMsgToBgScript("bg_click_Keyboard_close",{},()=>{})})},k=()=>{document.getElementById("recordingTimer").checked=y.recordingTimer,document.getElementById("countdown1").checked=y.countdownView,document.getElementById("countdown2").value=y.countdownNum,document.getElementById("drawingMouseTools").checked=y.drawingMouseTools,document.getElementById("systemSoundId").checked=y.systemSound},I=()=>{document.onkeydown=function(e){83===(e=e||window.event).keyCode&&e.altKey?document.getElementById("vcc-start-btn").click():81===e.keyCode&&e.altKey&&Helper.sendMsgToContentScript("popup_cancel_recording",null,()=>{})}},h=()=>{n&&n.stream_name&&n.stream_name;let e,t="",c="https://api.fluvid.com/api/v1/liveStream/my-schedule?limit=49&token="+localStorage.getItem("live_user_token");(async function(){let e=await fetch(c);return await e.json()})().then(c=>{c&&"200"==c.statusCode?(t=c.data.scheduledStream.data,l=t[0].stream_name,4!=o&&1!=o&&p(t[0].stream_name,t[0].type),t&&t.length>0&&t.map(t=>{e+=`<option value="${t.stream_name}">${t.title}</option>`}),document.querySelector("#stream-list-option").innerHTML=e):(p(n.stream_name,n.type),Helper.sendMsgToBgScript("stream_bg_id",{singleStreamData:n},()=>{}))}),document.querySelector("#stream-list-option").addEventListener("change",e=>{l=e.target.value;let o=t.filter(e=>e.stream_name===l);o=o?o[0]:n,p(l,o.type),Helper.sendMsgToBgScript("stream_bg_id",{singleStreamData:o},()=>{})})};return chrome.runtime.onMessage.addListener((e,t,c)=>{let r;if(Helper.log(e,"<== What is type of event call and other changes"),"logged_in"===e.type&&e&&e.profileData&&e.profileData.liveStream&&(n=e.profileData.liveStream),"bg-click-onlive"===e.type?r=setInterval(()=>{let t=document.querySelector("#on-live-tab");o=3,t&&t.click(),l=e&&e.data&&e.data.stream_name?e.data.stream_name:n.stream_name,i=e&&e.data&&e.data.type?e.data.type:n.type,1===o&&(clearInterval(r),Helper.showExtension(),Helper.hideExtLoader(),o=4,p(l,i))},500):"bg-click-offlive"===e.type&&(r=setInterval(()=>{let e=document.querySelector("#off-live-tab");e&&e.click(),2===o&&(clearInterval(r),Helper.showExtension(),Helper.hideExtLoader())},500)),"bg_plan_details_for_main"===e.type){let t=e.plans;if(t){let e=document.getElementById("recordingTimer"),n=document.getElementById("countdown1"),o=document.getElementById("countdown2"),c=document.getElementById("drawingMouseTools");if(t&&!t.fde_recording_timer){e&&(e.checked=!1,e.disabled=!0,document.getElementById("recordTimerPlan").style.display="block");let t=document.getElementById("shortcutBoardRecordingTimer");t&&(t.style.display="none"),y.recordingTimer=!1,Helper.setAdvanceSetting(y)}else{e&&(e.disabled=!1,document.getElementById("recordTimerPlan").style.display="none");let t=document.getElementById("shortcutBoardRecordingTimer");t&&(t.style.display="table-row")}if(t&&!t.fde_countdown_timer?n&&(n.checked=!0,n.disabled=!0,document.getElementById("countDownPlan").style.display="block",o.options[0].disabled=!0,o.options[1].disabled=!0,o.options[2].disabled=!0):n&&(n.disabled=!1,document.getElementById("countDownPlan").style.display="none",o.options[0].disabled=!1,o.options[1].disabled=!1,o.options[2].disabled=!1),t&&!t.fde_drawing_tools){c&&(c.checked=!1,c.disabled=!0,document.getElementById("drawingToolsPlan").style.display="block");let e=document.getElementById("shortcutBoardClearPaint");e&&(e.style.display="none"),y.drawingMouseTools=!1,Helper.setAdvanceSetting(y)}else{c&&(c.disabled=!1,document.getElementById("drawingToolsPlan").style.display="none");let e=document.getElementById("shortcutBoardClearPaint");e&&(e.style.display="table-row")}if(t&&!t.fde_recording_timer&&!t.fde_countdown_timer&&!t.fde_mouse_options&&!t.fde_drawing_tools){document.getElementById("resetToDefault")&&(document.getElementById("resetToDefault").style.opacity=0,document.getElementById("resetToDefault").style.cursor="auto")}let l=document.getElementById("shortcutBoardFluvidTool");!t||!l||t.fde_mouse_options&&t.fde_drawing_tools?l&&(l.style.display="table-row"):l.style.display="none",a=t&&t.fde_video_count_limit?t.fde_video_count_limit:null,s=!t.fde_recording;let i=t&&t.fde_plan_type?t.fde_plan_type:"BSC",d=document.getElementById("planNameId"),r=document.getElementById("basicplanMsgId");s?d&&(d.style.display="none",d.innerText=""):(d&&"PRO"==i&&(d.style.display="block",d.innerText="Pro"),"TEAM"==i&&d&&(d.style.display="block",d.innerText="Pro Team"),"TRL"==i&&r&&(d.style.display="block",d.innerText="Pro Trial"));let m=$("#extention-loader"),p=document.getElementById("showActionMenuBtnId"),g=document.getElementById("showKeyboardListId");m&&(m.animate({opacity:0},700),setTimeout(()=>{m.css({display:"none"})},600)),p&&(p.style.display="block"),g&&(g.style.display="none");let b=t.fde_time_limit,_=document.getElementById("fde_banner_msg");_&&b?(_.style.display="block",u=+b/1e3/60,v(0)):_&&(_.style.display="none")}(()=>{let e=JSON.parse(localStorage.getItem("live_user_profile")).videos_count;if(s&&a&&e>=+a){let e=`<div class="limit-reached-blk">\n                <img src="images/limit.png" width="200" style="margin: 10px 0;">\n                <h2>Recording Limit Reached</h2>\n                <h3>\n                    You've created ${a} recordings and are not allowed to create more recordings with your current plan.\n                </h3>\n                <p style="margin-top: 24px;">\n                Upgrade Now to Fluvid Pro (no recording limits) to continue recording videos and access a wide range of features designed exclusively for our Pro members.\n                </p>\n                <div class="recording-choice">\n                <br>\n                    <table width="100%">\n                        <tr>\n                            <td width="50%">\n                                <a href="https://fluvid.com/my-videos" target="_blank">My Videos</a>\n                            </td>\n                            <td width="50%">\n                                <a href="https://fluvid.com/plans" target="_blank" class="active">View Plans</a>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n            </div>`;document.getElementById("showActionMenuBtnId").innerHTML=e}})()}if("fde_chunk_upload"===e.type){let t=document.getElementById("uploadChunkId");if(t){let n=~~(100*e.receivedCounter/e.sentCounter)+"%";t.style.width=n,t.innerHTML=n}let n=document.getElementById("strat_new_recording"),o=document.getElementById("strat_current_recording_processed");n&&n.addEventListener("click",()=>{Helper.sendMsgToContentScript("cs_open_action_btn",{receivedCounter:0,sentCounter:0},()=>{})}),o&&o.addEventListener("click",()=>{Helper.sendMsgToContentScript("cs_close_loader_popup",{},()=>{})})}if("fde_camra_Clear_Load_intervel"===e.type&&clearInterval(d),"updateTimerMain"===e.type){let t=document.getElementById("recordingMenuOption");t&&(t.style.display="none");let n=document.getElementById("chromeNotAllowRecordingId");n&&(n.style.display="none");let o=document.getElementById("extensionMainTimers");o&&(o.innerHTML=e.timeDuration);let c=document.getElementById("recordingProgressId"),l=$("#extention-loader");l.animate({opacity:0},700),setTimeout(()=>{l.css({display:"none"}),c&&(c.style.display="block")},600)}if("click_screen_only"===e.type){let e=0,t=setInterval(()=>{e++;const n=document.getElementById("vcc-screen-btn");n&&(clearInterval(t),n.click()),e>=120&&clearInterval(t)},500)}}),{loadExtensionEventListeners:()=>{let t=$("#extention-loader");t&&t.animate({opacity:1},0),chrome.tabs.query({currentWindow:!0,active:!0},(function(e){var n=e[0].url,o=n.indexOf("www.")>-1||n.indexOf("http")>-1||n.indexOf("https")>-1;let c=document.getElementById("recordingMenuOption"),l=document.getElementById("chromeNotAllowRecordingId");o?Helper.getAdvanceSetting("advanceSettingStatus").then(e=>{let n=e.advanceSettingStatus;if(n.recordingStart){let e=document.getElementById("recordingProgressId");t.animate({opacity:0},700),setTimeout(()=>{t.css({display:"none"}),e&&(e.style.display="block")},600)}else setTimeout(()=>{c&&(c.style.display="block")},600),l&&(l.style.display="none");t.animate({opacity:0},700),setTimeout(()=>{t.css({display:"none"})},600),Helper.setAdvanceSetting(n)}):(c&&(c.style.display="none"),t.animate({opacity:0},700),setTimeout(()=>{t.css({display:"none"}),l&&(l.style.display="block")},600))}));var c=document.querySelectorAll(".cc-close-block-popup");Array.from(c).forEach(e=>{e.addEventListener("click",(function(){window.close()}))}),Helper.setPopupSetting({popupType:"open_2"});let l=document.getElementById("showActionMenuBtnId");l&&(l.style.display="none"),Helper.sendMsgToBgScript("bg_set_system_sound",{systemSound:y.systemSound},()=>{});let i={video:!0,audio:!0};Main.renderCamViewOnScreen(i);const a=document.getElementById("systemSountId"),s=document.getElementById("systemSoundToolTipId"),u=document.getElementById("vcc-start-btn"),p=document.getElementById("vcc-screen-cam-btn"),b=document.getElementById("vcc-screen-btn"),_=document.getElementById("vcc-cam-btn"),B=document.getElementById("vcc-full-desktop-btn"),f=document.getElementById("vcc-current-tab-btn"),T=document.getElementById("vcc-logout"),w=document.querySelector(".vcc-audio-toggle"),L=document.querySelector("#vcc-audio-options"),H=document.querySelector("#vcc-camera-options"),M=document.querySelector("#system-sound-wrapper-id"),C=document.querySelector("#drawing-mouse-tools-td-id");g(w,"click",()=>{if(w.checked){e.audio=!0,document.getElementById("vcc-audio-options").disabled=!1;let t=document.getElementById("showLoadHide"),n=document.getElementById("showLoadAudio");t&&(t.style.display="none"),n&&(n.style.display="block"),Helper.setEventActionFun("microphone_enabled","1")}else{e.audio=!1;let t=document.getElementById("showLoadHide"),n=document.getElementById("showLoadAudio");document.getElementById("vcc-audio-options").disabled=!0,t&&(t.style.display="block"),n&&(n.style.display="none"),Helper.setEventActionFun("microphone_enabled","0")}Main.enableCorrectOption(e),Helper.sendMsgToBgScript("bg_change_mic_btn",{},()=>{})}),g(L,"change",e=>{let t=L.options[L.selectedIndex].value;m("Selected Audio Device",t),Helper.setKeyValue("SELECTED_AUDIO_DEVICE",t),Helper.sendMsgToBgScript("bg_change_audio_option",{},()=>{})}),g(H,"change",()=>{let e=H.options[H.selectedIndex].value;m("Selected Video Device",e),Helper.setKeyValue("SELECTED_VIDEO_DEVICE",e),Helper.sendMsgToBgScript("bg_change_video_option",{},()=>{})}),g(u,"click",()=>{Main.enableCorrectOption(e),Main.communicateWithContentScript("start"),window.close(),Helper.sendMsgToBgScript("bg_click_start_recording",{},()=>{})}),g(p,"click",()=>{if(p.classList.contains("vcc-unaccessible"))return void m("Button Unaccessible");M&&(M.style.display="block"),C&&(C.style.display="table-row");let n=document.querySelector("#vcc-camera-container");n&&(n.style.display="block");let o=document.querySelectorAll(".vcc-tab a");if(o)for(let e=0;e<o.length;e++)o[e].classList.remove("active");document.querySelector("#vcc-screen-cam-btn a").classList.add("active");let c=document.querySelector("#vcc-full-desktop-btn a");c&&(c.style.display="block",document.querySelector("#vcc-current-tab-btn a").style.display="block"),Helper.getAdvanceSetting("advanceSettingStatus").then(e=>{e.advanceSettingStatus.recordingStart||l(),t.animate({opacity:0},700),setTimeout(()=>{t.css({display:"none"})},600)}).catch(()=>{l()});let l=()=>{e.screen=!0,e.camera=!0,Main.enableCorrectOption(e),i={video:!0,audio:!1},d=setInterval(()=>{Main.renderCamViewOnScreen(i)},1e3),Helper.sendMsgToContentScript("click_recording_btn",{camraFrameType:"1"},()=>{}),Helper.setEventActionFun("recording_mode","SC")};1==r&&Helper.sendMsgToBgScript("bg_click_screen_cam",{},()=>{}),r=1}),g(b,"click",()=>{if(b.classList.contains("vcc-unaccessible"))return void m("Button Unaccessible");M&&(M.style.display="block"),C&&(C.style.display="table-row"),m("Recording Type 2");let t=document.querySelector("#vcc-camera-container");t&&(t.style.display="none");let n=document.querySelectorAll(".vcc-tab a");if(n)for(let e=0;e<n.length;e++)n[e].classList.remove("active");document.querySelector("#vcc-screen-btn a").classList.add("active");let o=document.querySelector("#vcc-full-desktop-btn a");o&&(o.style.display="block",document.querySelector("#vcc-current-tab-btn a").style.display="block"),e.screen=!0,e.camera=!1,Main.enableCorrectOption(e),i={video:!1,audio:!1},Main.renderCamViewOnScreen(i),Helper.sendMsgToBgScript("bg_click_screen_only",{},()=>{}),Helper.sendMsgToContentScript("click_recording_btn",{camraFrameType:"2"},()=>{}),Helper.setEventActionFun("recording_mode","S")}),g(_,"click",()=>{if(_.classList.contains("vcc-unaccessible"))return void m("Button Unaccessible");M&&(M.style.display="none"),C&&(C.style.display="none"),m("Recording Type 3");let t=document.querySelector("#vcc-camera-container");t&&(t.style.display="block");let n=document.querySelectorAll(".vcc-tab a");if(n)for(let e=0;e<n.length;e++)n[e].classList.remove("active");let o=document.querySelector("#vcc-full-desktop-btn a"),c=document.querySelector("#vcc-cam-btn a");c&&c.classList.add("active"),o&&(o.style.display="none",document.querySelector("#vcc-current-tab-btn a").style.display="none"),e.screen=!1,e.camera=!0,Main.enableCorrectOption(e),i={video:!0,audio:!1},Main.renderCamViewOnScreen(i),Helper.sendMsgToBgScript("bg_click_Cam_only",{},()=>{}),Helper.sendMsgToContentScript("click_recording_btn",{camraFrameType:"3"},()=>{}),Helper.setEventActionFun("recording_mode","C")}),g(B,"click",()=>{m("Recording Type Full Desktop"),document.querySelector("#vcc-full-desktop-btn a").classList.add("active"),document.querySelector("#vcc-current-tab-btn a").classList.remove("active"),e.fullDesktop=!0,Main.enableCorrectOption(e),Helper.sendMsgToBgScript("bg_click_full_desktop",{},()=>{}),a&&(a.innerText="System sound"),s&&(s.innerText="Disabling system sound will not record any audio playing in the active browser window throughout the entire recording.")}),g(f,"click",()=>{m("Recording Type Current tab"),document.querySelector("#vcc-current-tab-btn a").classList.add("active"),document.querySelector("#vcc-full-desktop-btn a").classList.remove("active"),e.fullDesktop=!1,Main.enableCorrectOption(e),Helper.sendMsgToBgScript("bg_click_current_tab",{},()=>{}),a&&(a.innerText="Tab sound"),s&&(s.innerText="Disabling tab sound will not record any audio playing in the active browser tab throughout the entire recording.")}),g(T,"click",()=>{Main.logout()});const q=document.getElementById("on-live-tab"),A=document.getElementById("off-live-tab"),D=document.getElementById("live-setup-id"),x=document.getElementById("onOff-live-setup-id"),O=document.getElementById("vcc-copy-main-id"),R=document.getElementById("vcc-copy-btn-id"),P=document.getElementById("vcc-copy-url-id");var V=document.getElementById("advance-target"),U=document.getElementById("advance-trigger");x&&(x.style.display="block"),D&&(D.style.display="none"),O&&(O.style.display="none"),Helper.sendMsgToContentScript("click_offLive_tab",null,()=>{}),Helper.sendMsgToBgScript("bg_set_offLive_recording",{autoClick:!0},()=>{}),q.addEventListener("click",()=>{3!=o&&Helper.sendMsgToBgScript("stream_bg_id",{singleStreamData:n},()=>{}),h(),Helper.hideExtension(),Helper.showExtLoader(),q.classList.add("act"),A.classList.remove("act"),O&&(O.style.display="block"),u.innerText="Go Live",u.classList.add("live-btn-dv"),u.value=1,u.classList.remove("recording-btn-dv"),x&&D&&!n?(x.style.display="none",D.style.display="block"):(D&&(D.style.display="none"),x&&(x.style.display="block")),Helper.sendMsgToBgScript("bg_set_onLive_recording",{},()=>{}),o=1,V&&"block"==V.style.display&&(Helper.sendMsgToContentScript("cs_iframe_height",null,()=>{}),U.innerText="Show more options",V.style.display="none"),setTimeout((function(){Helper.showExtension(),Helper.hideExtLoader()}),200),v(1),Helper.setPopupSetting({popupType:"open_1"})}),A.addEventListener("click",()=>{Helper.showExtLoader(),Helper.hideExtension(),Helper.sendMsgToContentScript("click_offLive_tab",null,()=>{}),q.classList.remove("act"),A.classList.add("act"),O&&(O.style.display="none"),setTimeout((function(){Helper.showExtension(),Helper.hideExtLoader()}),200),u.innerText="Start Recording",u.value="0",u.classList.add("recording-btn-dv"),u.classList.remove("live-btn-dv"),x&&(x.style.display="block"),D&&(D.style.display="none"),Helper.sendMsgToBgScript("bg_set_offLive_recording",{autoClick:!1},()=>{}),o=2,"block"==V.style.display&&(Helper.sendMsgToContentScript("cs_iframe_height",null,()=>{}),U.innerText="Show more options",V.style.display="none"),v(0),Helper.setPopupSetting({popupType:"open_2"})}),R.addEventListener("click",()=>{if(x&&D){P.style.background="#228B22",P.style.color="#fff";var e=document.createElement("input");e.style="position: absolute; left: -1000px; top: -1000px";let t=document.getElementById("stream-list-option"),n=t.options[t.selectedIndex].text;e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),setTimeout(()=>{P.style.background="",P.style.color=""},1500),Helper.sendMsgToBgScript("bg_click_copy_clipboard_ext",{},()=>{})}}),k(),E(),Helper.setAdvanceSetting(y),Helper.setAdvanceSetting(y),S(),I(),window.onclick=function(e){e.target.matches("#navigateOpenId")||"none"==F.style.display||(F.style.display="none")};let N=document.getElementById("navigateOpenId"),F=document.getElementById("dropMenuId");N&&N.addEventListener("click",()=>{"none"==F.style.display?F.style.display="block":F.style.display="none"})},loadSignInPageEventListeners:()=>{const e=document.getElementById("vcc-login-btn"),t=document.getElementById("vcc-login-fb-btn"),n=document.getElementById("vcc-login-outlook-btn"),o=document.getElementById("vcc-apple-login-btn"),c=document.getElementById("vcc-goto-signup");g(e,"click",(function(){Main.handleLoginEvent("gmail")})),g(t,"click",(function(){Main.handleLoginEvent("facebook")})),g(n,"click",(function(){Main.handleLoginEvent("outlook")})),g(o,"click",(function(){Main.handleLoginEvent("apple")})),g(c,"click",_)},renderMediaDeviceList:()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return void m("enumerateDevices() not supported.");let n=!1,o=!1;navigator.mediaDevices.enumerateDevices().then((function(c){c.forEach((function(e){m(e.kind+": "+e.label+" id = "+e.deviceId),"audio"!==e.kind&&"audioinput"!==e.kind||("boolean"==typeof n&&(n=[]),e.label&&n.push({id:e.deviceId,name:e.label})),"video"!==e.kind&&"videoinput"!==e.kind||("boolean"==typeof o&&(o=[]),e.label&&o.push({id:e.deviceId,name:e.label}))})),"object"==typeof n&&0===n.length&&(t.available.audio=!0),"object"==typeof n&&n.length>0&&(t.available.audio=!0,t.permission.audio=!0),"object"==typeof o&&0===o.length&&(t.available.video=!0),"object"==typeof o&&o.length>0&&(t.available.video=!0,t.permission.video=!0),Helper.log("deviceInfo",t);let l="";if(t.available.audio&&t.permission.audio)n&&n.length>0&&n.map(e=>{l+=`<option value="${e.id}">${e.name}</option>`,b()}),l&&document.querySelector("#vcc-audio-options")&&(document.querySelector("#vcc-audio-options").innerHTML=l,document.querySelector("#vcc-audio-options").style.display="inline-block",document.querySelector("#vcc-audio-options-error").style.display="none",document.querySelector("#vcc-audio-options-permission").style.display="none",document.querySelector(".vcc-audio-toggle").checked=!0,document.querySelector(".vcc-audio-toggle").disabled=!1,Helper.setKeyValue("SELECTED_AUDIO_DEVICE",n[0].id),e.audio=!0);else{if(t.available.audio&&!t.permission.audio){m("Audio Condition 1");let e=document.querySelector("#vcc-audio-options-permission"),t=document.querySelector("#vcc-audio-options-error");e.style.display="block",t.style.display="none"}else{m("Audio Condition 2");let e=document.querySelector("#vcc-audio-options-permission");document.querySelector("#vcc-audio-options-error").style.display="block",e.style.display="none"}document.querySelector("#vcc-audio-options")&&(document.querySelector("#vcc-audio-options").innerHTML="",document.querySelector("#vcc-audio-options").style.display="none"),document.querySelector(".vcc-audio-toggle")&&(document.querySelector(".vcc-audio-toggle").checked=!1,document.querySelector(".vcc-audio-toggle").disabled=!0),Helper.setKeyValue("SELECTED_AUDIO_DEVICE",null),e.audio=!1}let i="";t.available.video&&t.permission.video?(o&&o.length>0&&o.map(e=>{i+=`<option value="${e.id}">${e.name}</option>`}),i&&document.querySelector("#vcc-camera-options")&&(document.querySelector("#vcc-camera-options").innerHTML=i,document.querySelector("#vcc-screen-cam-btn").classList.remove("vcc-unaccessible"),document.querySelector("#vcc-cam-btn").classList.remove("vcc-unaccessible"),document.querySelector("#vcc-cam-btn").classList.remove("active"),r=0,document.querySelector("#vcc-screen-cam-btn").click(),document.querySelector("#vcc-camera-options").style.display="inline-block",document.querySelector("#vcc-camera-options-error").style.display="none",document.querySelector("#vcc-camera-options-permission").style.display="none",e.camera=!0,Helper.setKeyValue("SELECTED_VIDEO_DEVICE",o[0].id))):(t.available.video&&!t.permission.video?(m("Video Condition 1"),document.querySelector("#vcc-camera-options-error").style.display="none",document.querySelector("#vcc-camera-options-permission").style.display="block"):(m("Video Condition 2"),document.querySelector("#vcc-camera-options-error").style.display="block",document.querySelector("#vcc-camera-options-permission").style.display="none",document.querySelector("#vcc-screen-btn").click(),document.querySelector("#vcc-screen-cam-btn").classList.add("vcc-unaccessible"),document.querySelector("#vcc-screen-cam-btn").classList.remove("active")),e.camera=!1,document.querySelector("#vcc-camera-options").innerHTML="",document.querySelector("#vcc-camera-options").style.display="none",document.querySelector("#vcc-cam-btn").classList.remove("active"),document.querySelector("#vcc-cam-btn").classList.add("vcc-unaccessible"),Helper.setKeyValue("SELECTED_VIDEO_DEVICE",null))})).catch((function(e){}))},saveUserProfile:e=>{m("picUrl",e),Helper.setUserImage(e)}}}()}else cookies_msg&&(cookies_msg.style.display="block");