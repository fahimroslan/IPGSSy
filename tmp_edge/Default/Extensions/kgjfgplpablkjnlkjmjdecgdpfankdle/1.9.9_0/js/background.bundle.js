(()=>{"use strict";var e,t={541:()=>{},588:(e,t,a)=>{var o=a(909),i=a(46),n=a(336),s=a(78),r=a(663);let l;async function p(e){let t=parseInt(await n.A.getValue("zoom_login_req_option_tabid"));if(!isNaN(t))if(1===e){n.A.removeValue("zoom_login_req_option_tabid");let a=parseInt(await n.A.getValue("zoom_popup_tabpage_tabid"));n.A.removeValue("zoom_popup_tabpage_tabid"),chrome.tabs.remove(a,(function(){chrome.runtime.lastError}));let o=await n.A.getValue("zoom_login_req_need_reload");chrome.tabs.update(t,{active:!0},(function(a){if(!chrome.runtime.lastError)if(o)chrome.tabs.reload(t);else{let a={type:"authenticationSigninResult",state:e};chrome.tabs.sendMessage(t,a)}})),n.A.removeValue("zoom_login_req_need_reload")}else{let e=parseInt(await n.A.getValue("zoom_popup_tabpage_tabid"));chrome.tabs.update(e,{active:!0},(function(t){if(!chrome.runtime.lastError){let t={type:"signinResultMessage",msg:s.errors[6]};chrome.tabs.sendMessage(e,t)}}))}}var c;function u(e){e&&chrome.tabs.query({},(function(t){t.length>1?chrome.tabs.remove(e,(function(){chrome.runtime.lastError})):chrome.tabs.update(e,{url:"about:blank"},(function(){chrome.runtime.lastError}))}))}function d(e,t,a,o){l&&l.postMessage({error:!0,errorMsg:e,syncState:t,noReviveSchedule:!!a,alertMessage:o})}function g(e,t){return new Promise(((a,o)=>{chrome.tabs.sendMessage(e,t,(e=>{chrome.runtime.lastError?o(chrome.runtime.lastError):a(e)}))}))}async function m(e,t){if(e&&"function"===r.type(t)){if(3105==e.errorCode||9002==e.errorCode||9011==e.errorCode){let e={syncState:1,errorMessage:s.tips[14]};t(e);try{await o.A.toSyncImmediate(),t({syncState:2,errorMessage:s.tips[15]})}catch(e){t({syncState:3,errorMessage:s.tips[16]})}return e}if(3113==e.errorCode){let a={syncState:1,errorMessage:s.tips[14],alertMessage:e.errorMessage};t(a);try{await o.A.toSyncImmediate(),t({syncState:2,errorMessage:s.tips[15],noReviveSchedule:!0})}catch(e){t({syncState:3,errorMessage:s.tips[16]})}return a}return t(e),e}}chrome.runtime.onInstalled.addListener((e=>{"update"===e.reason&&o.A.checkSyncFoVersionOrTime()})),chrome.runtime.onMessage.addListener((c=async function(e,t){let a,i,l,c=await n.A.getZoomData(),g=!1;c&&(c.assistants&&(a=c.assistants),c.forcelogin&&(i=c.forcelogin),c.trackfields&&(l=c.trackfields),c.scheduleDefaultLockOption&&(g="true"===c.scheduleDefaultLockOption.usePMISchedule_locked));let f,h=!1,y=!1;if(c&&c.audiopac&&(f=c.audiopac),f&&f.option_pac_enable&&(h=!0),c&&c.option_freeuser&&(y=!!c.option_freeuser&&await n.A.hasZoomRqToken()),"getZoomToken"==e.type){let e=await n.A.getZoomZakRequestToken();if(e){let{inputManualPwd:t,voidable:s}=await o.A.checkNeedPasswordForPopup(),r=!1;if(c?.enableExtensionPopupNewFlow||(r=!!await n.A.getValue("zoom_config_fixed_popup")),!r){let{pwEnable:e,wrEnable:t,authEnable:a,updateAuthOptionItem:i}=await o.A.getSecurityResult();!(await n.A.getSecurity()).security3c1||e||t||a||(r=!0)}return{baseurl:await n.A.getUserBaseUrl(),token:e,fte:await n.A.getValue("zoom_config_fte"),showSetting:r,inputManualPwd:t,pwdVoidable:s,showDomainInput:i&&i.domain_login,hasAssistants:a&&a.length>0,requireTracking:l&&l.length>0,schedulePmiLock:g,trackfields:l,zoom_config_pmi_saved_pwd:await o.A.getPmiSavedPwd(),zoom_config_pmi:Boolean(await n.A.getValue("zoom_config_pmi")),meetingPwdSettingsMap:await o.A.getMeetingPwdSettingsMap(),iSFreeAccount:c&&c.iSFreeAccount,embedPasscode:c&&c.embedPasscode}}return o.A.popupLogin(),{}}if("getInitData"==e.type){let e=null;try{e=await o.A.checkSyncFoVersionOrTime()}catch(e){}if(null!==e&&(c=await n.A.getZoomData()),c){let e=c.meetingTrashUrl,t="",a=await n.A.getUserBaseUrl();return e&&("string"===r.type(e)&&"/"===e[0]&&(e=e.slice(1)),t=a+e),{meetingTrashUrl:t,meetingTrashcanExpiredDays:c.meetingTrashcanExpiredDays||7,email:c.email||"",zoomBaseUrl:a}}return""}if("saveValue"==e.type)return e.key&&await n.A.saveValue(e.key,e.value),{};if("getReadyToSchedule"==e.type)return{readyToSchedule:await o.A.getReadyToSchedule()};if("loadAppConfig"==e.type)return{type:"postAppConfig",info:s};if("passZoomExtLoginSession"==e.type){let a=t?.tab?.id;try{await o.A._ssologin(e.info.url),u(a),n.A.saveZoomSSOValidDate(new Date),n.A.saveValue("zoom_auth_type",2),p(1)}catch(e){n.A.clearAllData(),u(a),p(2)}return{}}if("supportPAC"==e.type)return{hasPac:h};if("quickschedule"==e.type){if(!await n.A.hasZoomRqToken())return o.A.popupLogin(),{};{let t=!!await n.A.getValue("zoom_config_pmi"),{pwEnable:a,wrEnable:i,authEnable:s,updateAuthOptionItem:r}=await o.A.getSecurityResult(),l=await n.A.getSecurity();if(l.security3c1&&!a&&!i&&!s)return{resetpwd:!0};if(a&&t){let t=await o.A.getPmiSavedPwd();if(!t&&!i&&l.security3c1)return{resetpwd:!0};e.info.securityRes={pwd:t}}try{return await o.A._scheduleMeeting(e.info)}catch(e){let t=e.data;if(t||(t={errorMessage:e.statusText}),201==t.errorCode)return o.A.popupLogin(),{};{let e=await m(t,(function(e){e.syncState&&d(e.errorMessage,e.syncState,e.noReviveSchedule,e.alertMessage)}));return e||{}}}}}else{if("validateAltHost"==e.type){if(await n.A.hasZoomRqToken())try{return await o.A.validAlternateHost(e.althosts)}catch(e){return e}else o.A.popupLogin();return{}}if("checkUserType"==e.type)return{freeUser:y};if("checkShowFree40MinsTip"==e.type)return{showFree40MinsTip:c?.showFree40MinsTip,isPaidAccount:c?.isPaidAccount};if("isNoMeetingLicenseUser"==e.type)return{noLicenseUser:c&&c.no_meeting_license_user};if("getWhiteboardData"==e.type)return await n.A.hasZoomRqToken()?{hasLogin:!0,whiteboard:c?.whiteboard}:{hasLogin:!1};if("getWhiteboardUrl"==e.type)return await n.A.hasZoomRqToken()?{whiteboardUrl:await o.A.getWhiteboardUrl(),baseurl:await n.A.getUserBaseUrl()}:(o.A.popupLogin(),{});if("checkPreloadWb"==e.type)return await n.A.hasZoomRqToken()?{hasLogin:!0,support:c?.whiteboard?.support,allowPreloadWb:await n.A.getAllowPreloadWb(),whiteboardUrl:await o.A.getWhiteboardUrl(),baseurl:await n.A.getUserBaseUrl()}:{hasLogin:!1};if("getEmailConsistencyCheckData"==e.type)return await n.A.hasZoomRqToken()?{hasLogin:!0,enableEmailConsistencyCheck:!!c?.enableEmailConsistencyCheck,email:c?.email||""}:{hasLogin:!1};if("forceLogoutExtension"==e.type)return o.A.logout((function(){!async function(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});try{chrome.tabs.sendMessage(e.id,{type:"notificationSignout"},(function(){chrome.runtime.lastError}))}catch(e){}}()})),{};if("getAccountEmail"==e.type)return await n.A.hasZoomRqToken()?{email:c?.email||""}:{email:""};if("openUrl"==e.type){let t=e.url;return t&&chrome.tabs.create({url:t}),{}}if("getWorkspaceData"==e.type)return await n.A.hasZoomRqToken()?{hasLogin:!0,zak:await n.A.getZoomZakRequestToken(),haveShownWsTips:await n.A.getHaveShownWsTips(),...await n.A.getWorkspaceData()}:{};if("getWorkspaceToken"==e.type){if(await n.A.hasZoomRqToken()){let e=await o.A.getWorkspaceToken();return e?.success&&e?.data?.accessToken?{token:e.data}:{}}}else{if("getReservedRooms"==e.type){if(await n.A.hasZoomRqToken()){const t=e.info,a=!1;return await o.A.getReservedRooms(t.token,t.eventId,a)}return{}}if("saveWorkspace"==e.type){if(await n.A.hasZoomRqToken()){const t=e.info,a=!1;return await o.A.saveWorkspace(t.token,t.data,a)}return{}}if("checkReservedRooms"==e.type){if(await n.A.hasZoomRqToken()){const t=e.info,a=!1;return await o.A.checkReservedRooms(t.token,t.data,a)}return{}}if("getWorkspaceFileToken"==e.type){if(await n.A.hasZoomRqToken())return{fileToken:await o.A.getWorkspaceFileToken()}}else{if("getWorkspaceRoomImg"==e.type)return await n.A.hasZoomRqToken()?await o.A.getWorkspaceRoomImg(e.info.url,e.info.fileToken,e.info.enableFilePresignToken,!1):{};"setHaveShownWsTips"==e.type?await n.A.hasZoomRqToken()&&n.A.setHaveShownWsTips(e.value):"callPopupLogin"==e.type&&o.A.popupLogin()}}}},function(e,t,a){return Promise.resolve(c(e,t)).then(a),!0})),chrome.runtime.onConnect.addListener((function(e){async function t(t){try{await o.A.editMeeting(t);t?.isNewSchedule&&await async function(){let e=await n.A.getZoomData();if(e?.showBiSyncPopup&&!await n.A.getValue("dontShowBiSyncPopup")){let e=await n.A.getValue("showBiSyncPopupDate"),t=(new Date).getDate().toString();if(e!==t)return await n.A.saveValue("showBiSyncPopupDate",t),!0}return!1}()&&e.postMessage({type:"showBiSyncPopup"})}catch(t){if(t.data){let a=await n.A.getZoomData();a&&a.hideError4SpecialUser||e.postMessage({type:"editFailed",errorCode:t.data.errorCode,errorMsg:t.data.errorMessage})}}}async function a(t){try{let a={type:"schedule"};0;let i=await o.A._scheduleMeeting(t);n.A.saveValue("zoom_config_fte",!1),a.meeting=i.result,e.postMessage(a)}catch(t){let a=t.data;a||(a={errorMessage:t.statusText}),201==a.errorCode?(e.postMessage({type:"restoreScheduleBtn"}),o.A.popupLogin()):m(a,(function(e){d(e.errorMessage||s.errors[5],e.syncState,e.noReviveSchedule,e.alertMessage)}))}}console.assert("Zoom"==e.name),l=e,e.onMessage.addListener((async function(r){if("schedule"==r.type)await n.A.hasZoomRqToken()?a(r.info):o.A.popupLogin();else if("schedulepac"==r.type){if(await n.A.hasZoomRqToken())try{let t=await o.A.schedulePACMeeting(r.info);e.postMessage({type:"schedule",meeting:t.result})}catch(e){d(201==e?.data?.errorCode?"login###again":s.errors[5])}else o.A.popupLogin()}else if("update"==r.type){await n.A.hasZoomRqToken()&&t(r.info)}else if("delete"==r.type){if(await n.A.hasZoomRqToken())try{let t=await o.A.deleteMeeting(r.info);e.postMessage({type:"delSuccess",meeting:t.result})}catch(e){}}else if("icon_delete"==r.type){if(await n.A.hasZoomRqToken())try{let t=await o.A.deleteMeeting(r.info);e.postMessage({type:"iconDeleteSuccess",meeting:t.result})}catch(t){e.postMessage({type:"iconDeleteFailed",showMsg:t?.data?.showMsg})}else e.postMessage({type:"iconDeleteFailed"}),o.A.popupLogin()}else if("deleteonly"==r.type){if(await n.A.hasZoomRqToken())try{await o.A.deleteMeeting(r.info)}catch(e){}}else if("loadZoomOptions"==r.type)e.postMessage({type:"updateZmOptions",zmOpt:await o.A.getZoomSetting()});else if("saveOptionsAndSchedule"==r.type)if(await n.A.hasZoomRqToken()){let{securityRes:e,allowDenyRes:t,templateRes:i,enable_alternative_host_edit_poll:l,focusModeValue:p,record_id:c,qa:u,pmc:g,cmcFeatureUserType:m,enableInterpretation:f,interpretation:h,topic:y,scheduleTime:w,meetingSummary:A,meetingQuery:k,whoCanAskQuestion:v,whoReceiveSummary:b,enable_unmute_all:S,enable_moderate_unmute:T,meetingWallpaper:_,waitingRoom:M,enableSmartAgendaFor3rd:R,...Z}=r.info;0;try{let i=Z.zoom_config_pmi,g=await o.A.updateZoomSetting(Z);g?.status?(i&&(n.A.updateSecurity(e),n.A.updateAllowDeny(t),n.A.updateAllowAlternativeHostEditPoll(l),n.A.updateFocusMode(p),await n.A.updateZoomDataForPMI({record_id:c,qa:u,meetingSummary:A,whoReceiveSummary:b,meetingQuery:k,whoCanAskQuestion:v,enable_unmute_all:S,enable_moderate_unmute:T,meetingWallpaper:JSON.stringify(_),waitingRoom:M},i)),a(r.info)):201==g?.errorCode?o.A.popupLogin(!0):d(s.errors[5])}catch(e){d(s.errors[5])}}else o.A.popupLogin();else if("saveOptionsAndQuickSchedule"==r.type)if(await n.A.hasZoomRqToken())if(r.info.changepwd){let e=await n.A.getSecurity(),t=r.info.securityRes.pwd;t&&""!=t&&(e.pmi.passcode.value=t,n.A.setSecurity(e)),a(r.info)}else try{await o.A.updateSettingForQucik(r.info),a(r.info)}catch(e){}else o.A.popupLogin();else if("sendLog"==r.type)await n.A.hasZoomRqToken()&&i.A.sendLog(r.info,(function(){}));else if("sendAllLogs"==r.type)await n.A.hasZoomRqToken()&&i.A.sendAllLogs();else if("sync"==r.type){try{o.A.toSync()}catch(e){}r.info?.updateTimeStampForUseWb&&n.A.updateTimeStampForUseWb()}else if("saveNewCalendarEvent"==r.type)try{await o.A.createMeetingMp(r.info)}catch(e){}else if("removeCalendarEvent"==r.type){i.A.sendLog({msgType:3,msg:{info:"zm-observer trigger to delete.",baseid:r.info.event_baseid},operaType:1});try{let t=await o.A.deleteMeeting(r.info);e.postMessage({type:"delSuccess",meeting:t.result})}catch(e){}}else if("updateTimeAndTimezone"==r.type)try{await o.A.updateMeetingTimeAndTimezone(r.info)}catch(t){const a=t?.data?.errorCode;let o=!1;if(3161==a)o=!0;else if(9020==a){const e=await n.A.getZoomData();e?.hideError4SpecialUser||(o=!0)}o&&e.postMessage({type:"updateTimeAndTimezoneFailed",errorCode:a,errorMsg:t.data.errorMessage})}else if("saveInvitee"==r.type)try{await o.A.saveInvitee(r.info)}catch(e){}else if("getCalendarEvent"==r.type);else if("signWithGoogleEvent"==r.type);else if("workemailSigninEvent"==r.type);else if("ssoSigninEvent"==r.type);else if("saveStorageData"==r.type){let e=r.key,t=r.val;n.A.saveValue(e,t)}else if("loadAppConfig"==r.type)e.postMessage({type:"postAppConfig",info:s});else if("callPopupLogin"==r.type)o.A.popupLogin();else if("remoteCheckPwd"==r.type){if(r.info.pwd)try{let t=await o.A.remoteCheckPassword(r.info.pwd);201==t.errorCode?o.A.popupLogin(!0):e.postMessage({type:"remoteCheckPwdResult",exception:!1,info:{res:t.status,msg:t.errorMessage,errortype:1,channel:r.info.channel}})}catch(t){e.postMessage({type:"remoteCheckPwdResult",exception:!0,info:{channel:r.info.channel}})}}else if("viewTemplateDetail"==r.type){let e=r.info.templateId;if(e){let t=await o.A.getAdminTemplateDetailUrl(e);chrome.tabs.create({url:t})}}else if("getWhiteboardToken"==r.type)if(await n.A.hasZoomRqToken())try{let t=await o.A.getWhiteboardToken();if(t.status){let a=0,o=t?.result;o?.expire_time&&o?.create_time&&(a=1e3*(o?.expire_time-o?.create_time)),e.postMessage({type:"getWhiteboardTokenResult",exception:!1,info:{res:t.status,msg:t.errorMessage,access_token:o?.access_token,token_exp:a}})}}catch(t){e.postMessage({type:"getWhiteboardTokenResult",exception:!0,info:{msg:t?.data?.errorMessage||t}})}else e.postMessage({type:"getWhiteboardTokenResult",exception:!0,info:{}}),o.A.popupLogin(!0);else if("getWhiteboardInfo"==r.type)if(await n.A.hasZoomRqToken())try{let t=await o.A.getWhiteboardInfo(r.token,r.docId);if(!t?.docId)throw error;e.postMessage({type:"getWhiteboardInfoResult",exception:!1,info:{data:t}})}catch(t){e.postMessage({type:"getWhiteboardInfoResult",exception:!0,info:{data:{docId:r.docId},msg:t}})}else e.postMessage({type:"getWhiteboardInfoResult",exception:!0,info:{data:{docId:r.docId},msg:""}});else if("executeEditWB"==r.type){await n.A.hasZoomRqToken()&&await o.A.executeEditWB(r.info)}else if("executeDeleteWB"==r.type){await n.A.hasZoomRqToken()&&await o.A.executeDeleteWB(r.info)}else if("saveDontShowBiSyncPopup"==r.type){await n.A.hasZoomRqToken()&&await async function(){await n.A.saveValue("dontShowBiSyncPopup",!0),await o.A.saveDontShowBiSyncPopup()}()}}))})),chrome.storage.onChanged.addListener(((e,t)=>{"local"===t&&e.zoom_data&&chrome.tabs.query({url:"https://calendar.google.com/*"},(e=>{for(const t of e)g(t.id,{type:"STORAGE_UPDATED",key:"zoomData"}).catch((e=>{console.log("error: ",e?.message)}))}))})),chrome.runtime.onMessageExternal.addListener((function(e,t,a){return e&&e.message&&"version"==e.message&&a({version:1}),!0}))}},a={};function o(e){var i=a[e];if(void 0!==i)return i.exports;var n=a[e]={exports:{}};return t[e].call(n.exports,n,n.exports,o),n.exports}o.m=t,e=[],o.O=(t,a,i,n)=>{if(!a){var s=1/0;for(c=0;c<e.length;c++){for(var[a,i,n]=e[c],r=!0,l=0;l<a.length;l++)(!1&n||s>=n)&&Object.keys(o.O).every((e=>o.O[e](a[l])))?a.splice(l--,1):(r=!1,n<s&&(s=n));if(r){e.splice(c--,1);var p=i();void 0!==p&&(t=p)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,i,n]},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.j=471,(()=>{var e={471:0,997:0};o.O.j=t=>0===e[t];var t=(t,a)=>{var i,n,[s,r,l]=a,p=0;if(s.some((t=>0!==e[t]))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(l)var c=l(o)}for(t&&t(a);p<s.length;p++)n=s[p],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},a=self.webpackChunkextension=self.webpackChunkextension||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var i=o.O(void 0,[997,628,738],(()=>o(588)));i=o.O(i)})();